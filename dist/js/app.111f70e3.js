(function(e){function t(t){for(var n,o,c=t[0],u=t[1],s=t[2],d=0,m=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(m.length)m.shift()();return i.push.apply(i,s||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,c=1;c<r.length;c++){var u=r[c];0!==a[u]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},i=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var l=u;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},1:function(e,t){},1938:function(e,t,r){},"3a87":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("7a23");function a(e,t,r,a,i,o){var c=Object(n["i"])("BlockCountdown");return Object(n["f"])(),Object(n["b"])(c)}var i=Object(n["k"])("data-v-4f7625ee");Object(n["h"])("data-v-4f7625ee");var o=Object(n["e"])("h1",null,"Latest",-1),c={key:0,class:"note"},u=Object(n["e"])("h1",null,"Test Countdown",-1),s=Object(n["e"])("h2",null,"Block countdown",-1),l=Object(n["e"])("h2",null,"Time countdown",-1);Object(n["g"])();var d=i((function(e,t,r,a,i,d){return Object(n["f"])(),Object(n["b"])("div",null,[o,Object(n["e"])("div",null," Block Number: "+Object(n["j"])(e.currentBlock),1),Object(n["e"])("div",null,[Object(n["d"])(" Block Time: "+Object(n["j"])(e.currentTimeStr)+" ",1),e.isTimeLoading?(Object(n["f"])(),Object(n["b"])("span",c,"(refreshing time)")):Object(n["c"])("",!0)]),Object(n["e"])("div",null,[Object(n["d"])(" Now - latest block time: "+Object(n["j"])(e.deltaFromNow)+" seconds ",1),Object(n["e"])("span",null," ("+Object(n["j"])(e.averageTimeGap)+" average delta when a new block appears) ",1)]),Object(n["e"])("div",null,[Object(n["d"])(" Time gap between blocks: "+Object(n["j"])(e.deltaFromPrevious)+" seconds ",1),Object(n["e"])("span",null," ("+Object(n["j"])(e.averageDeltaFromPrevious)+" average) ",1)]),u,Object(n["d"])(" Target time: "+Object(n["j"])(e.targetTimeStr)+" ",1),Object(n["e"])("div",null," Target block: "+Object(n["j"])(e.targetBlock)+" (assumes 13 seconds between blocks) ",1),s,Object(n["e"])("div",null,Object(n["j"])(e.blocksRemaining)+" (~"+Object(n["j"])(e.estTimeRemaining)+" seconds) ",1),l,Object(n["e"])("div",null,Object(n["j"])(e.timeRemaining),1)])})),m=(r("a9e3"),r("8ba4"),r("96cf"),r("1da1")),b=r("c030");function h(e){return new Date(1e3*e).toLocaleString()}var f={name:"BlockCountdown",data:function(){return{currentBlock:"Loading...",currentTime:0,currentTimeStr:"Loading...",isTimeLoading:!1,deltaFromNow:"TBD",deltaFromPrevious:"TBD",totalDeltaFromPrevious:0,totalTimeGap:0,deltaCountTracked:0,averageDeltaFromPrevious:"TBD",averageTimeGap:"TBD",targetTime:1609459200,targetTimeStr:"TBD",targetBlock:"TBD",blocksRemaining:"TBD",estTimeRemaining:"TBD",timeRemaining:"TBD",timeOfLastValidBlock:"TBD"}},mounted:function(){this.readBlocks(),setInterval(this.calcDeltaFromNow,1e3),this.updateTarget(),this.targetTimeStr=h(this.targetTime)},methods:{readBlocks:function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new b["a"].providers.WebSocketProvider("wss://mainnet.infura.io/ws/v3/45bd5197d3244dbaaa020750fd32efda"),e.next=3,t.getBlock("latest");case 3:r=e.sent,this.currentBlock=r.number,this.updateTime(r.timestamp),t.on("block",function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.currentBlock=r,n.isTimeLoading=!0,e.next=4,t.getBlock(r);case 4:a=e.sent,n.updateTime(a.timestamp);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateTime:function(e){if(this.currentTime){this.deltaCountTracked++;var t=e-this.currentTime;this.totalDeltaFromPrevious+=t,this.averageDeltaFromPrevious=Math.round(this.totalDeltaFromPrevious/this.deltaCountTracked,2),this.deltaFromPrevious=t;var r=Math.round(Date.now()/1e3)-e;this.totalTimeGap+=r,this.averageTimeGap=Math.round(this.totalTimeGap/this.deltaCountTracked,2)}this.currentTime=e,this.currentTimeStr=h(e),this.isTimeLoading=!1,this.calcDeltaFromNow()},calcDeltaFromNow:function(){var e=Math.round(Date.now()/1e3)-this.currentTime;if(this.deltaFromNow=e,Number.isInteger(this.currentBlock)&&Number.isInteger(this.targetBlock)){this.blocksRemaining=this.targetBlock-this.currentBlock;var t=Math.round(Date.now()/1e3)-this.currentTime;this.estTimeRemaining=13*this.blocksRemaining-t,this.timeRemaining=this.targetTime-Math.round(Date.now()/1e3)}},updateTarget:function(){if(!Number.isInteger(this.currentBlock))return setTimeout(this.updateTarget,1e3);var e=this.targetTime-Math.round(Date.now()/1e3),t=Math.round(e/13);this.targetBlock=this.currentBlock+t}}};r("8c8f");f.render=d,f.__scopeId="data-v-4f7625ee";var p=f,v={name:"App",components:{BlockCountdown:p}};r("e6d4");v.render=a;var g=v;Object(n["a"])(g).mount("#app")},"8c8f":function(e,t,r){"use strict";r("1938")},e6d4:function(e,t,r){"use strict";r("3a87")}});
//# sourceMappingURL=app.111f70e3.js.map